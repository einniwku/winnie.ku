"undefined"==typeof console&&(console={dir:function(){},log:function(){}}),function(){var e={};e.getTwitterFeed={_settings:{debug:"false"},tweetPromise:{},configure:function(e){$.extend(this._settings,e),this.tweetCache=[],this.tweetPromise=this.getFeed(this)},getFeed:function(e){var t=[],n=[];this._settings.user instanceof Array?t=this._settings.user:t.push(this._settings.user);for(var r=0,i=t.length;i>r;r++){var s="https://search.twitter.com/search.json?include_entities=true&from="+t[r]+"&rpp="+Math.ceil(this._settings.tweetCount/i)+"&with_twitter_user_id=true&callback=?",a=$.getJSON(s);n.push(a),$.when(a).then(function(t){for(var n=0,r=t.results.length;r>n;n++)e.tweetCache.push(t.results[n])})}return $.when.apply(null,n)},sortFeeds:function(){var e=function(e,t){var n=new Date(e.created_at),r=new Date(t.created_at);return r.valueOf()-n.valueOf()};this.tweetCache.sort(e)},createNewInstance:function(){var e=function(){};return e.prototype=this,new e}},e.renderFeed={configure:function(e,t,n){this._settings={tweetCount:5,getProfilePic:!0,linkLinks:!0,linkHashes:!0,linkMentions:!0,getDate:!0,renderCallback:null},this.thefeed=e,this.containerElem=n,this.$tweetwrap=$("<div class='tweetcontainer'></div>"),console.log("configuring tweets: "+e.length),$.extend(this._settings,t)},createNewInstance:function(){var e=function(){};return e.prototype=this,new e},render:function(){for(var e=this.thefeed,t=0,n=e.length;n>t;t++){var r=e[t].text,i=$("<div class='tweet'></div>");t==e.length-1&&i.addClass("last");var s=$("<p class='tweetbody'></p>");if(this._settings.getProfilePic&&i.append(this.handleProfilePic(e[t])),this._settings.linkLinks&&(r=this.handleLinks(e[t],r)),this._settings.linkHashes&&(r=this.handleHashes(e[t],r)),this._settings.linkMentions&&(r=this.handleMentions(e[t],r)),this._settings.getDate)var a=this.handleDates(e[t]);s.append(r),i.append(s),i.append(a),this.$tweetwrap.append(i)}this.containerElem.append(this.$tweetwrap),this._settings.renderCallback&&this._settings.renderCallback.call(this.containerElem)},handleDates:function(e){var t=$("<div class='tstamp'></div>"),n=new Date(e.created_at);return t.append(this.hoursAgo(Date.parse(n))),t},handleProfilePic:function(e){var t=e.from_user,n=$("<a href='http://www.twitter.com/#!/"+t+"'target='_blank' class='profileimglink'></a>"),r=$("<img src='' class='tweetprofilepic' align=\"left\"/>");return r.attr("src",e.profile_image_url_https),n.append(r),n},handleLinks:function(e,t){var n=e.entities.urls;if(n)for(var r=t,i=0,s=n.length;s>i;i++){var a="<a href='"+n[i].url+"' target='_blank' title='"+n[i].expanded_url+"'>"+n[i].url+"</a>",d=new RegExp(n[i].url,"gi");r=r.replace(d,a)}return r},handleHashes:function(e,t){var n=e.entities.hashtags,r=t;if(n)for(var i="",s="",a="",d=0,c=n.length;c>d;d++)i="http://twitter.com/#!/search?q=%23"+n[d].text,s="<a href='"+i+"' target='_blank' title='"+n[d].text+"'>#"+n[d].text+"</a>",a=new RegExp("#"+n[d].text,"gi"),r=r.replace(a,s);return r},handleMentions:function(e,t){var n=/(@\w+)/gim,r=t,r=r.replace(n,'<a href="http://twitter.com/#!/$1" target="_blank">$1</a>');return r},hoursAgo:function(e){var t=new Date,n=(t-e)/1e3/60/60;if(1>n)return"Less than an hour ago";var r=Math.floor(n);return r+(r>1?" hours ago":" hour ago")}};var t={getTwitterFeed:e.getTwitterFeed.createNewInstance(),renderFeed:e.renderFeed.createNewInstance()};t.getTwitterFeed.getFeed=function(e){var t=[];this._settings.user instanceof Array?t=this._settings.user:t.push(this._settings.user);for(var n=[],r=0,i=t.length;i>r;r++){var s="https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name="+t[r]+"&count="+Math.ceil(this._settings.tweetCount/i)+"&callback=?",a=$.getJSON(s);n.push(a),$.when(a).then(function(t){for(var n=0,r=t.length;r>n;n++)e.tweetCache.push(t[n])})}return $.when.apply(null,n)},t.renderFeed.handleProfilePic=function(e){var t=e.user.screen_name,n=$("<a href='http://www.twitter.com/#!/"+t+"'target='_blank' class='profileimglink'></a>"),r=$("<img src='' class='tweetprofilepic' align=\"left\"/>");return r.attr("src",e.user.profile_image_url_https),n.append(r),n};var n={getTwitterFeed:t.getTwitterFeed.createNewInstance(),renderFeed:t.renderFeed.createNewInstance()};n.getTwitterFeed.getFeed=function(e){var t=[];this._settings.user instanceof Array?t=this._settings.user:t.push(this._settings.user);for(var n=[],r=0,i=t.length;i>r;r++){var s="https://api.twitter.com/1/lists/statuses.json?include_entities=true&include_rts=true&owner_screen_name="+t[r].username+"&slug="+t[r].listslug+"&per_page="+this._settings.tweetCount+"&page=1&callback=?",a=$.getJSON(s);n.push(a),$.when(a).then(function(t){for(var n=0,r=t.length;r>n;n++)e.tweetCache.push(t[n])})}return $.when.apply(null,n)};var r={getYouTubeFeed:e.getTwitterFeed.createNewInstance(),renderFeed:e.renderFeed.createNewInstance()};r.getYouTubeFeed.getFeed=function(e){var t=[];this._settings.user instanceof Array?t=this._settings.user:t.push(this._settings.user);for(var n=[],r=0,i=t.length;i>r;r++){var s="https://gdata.youtube.com/feeds/api/users/"+t[r]+"/uploads?v=2&alt=json&max-results="+this._settings.tweetCount+"&callback=?",a=$.getJSON(s);n.push(a),$.when(a).then(function(t){for(var n=0,r=t.length;r>n;n++)e.tweetCache.push(t[n])})}return $.when.apply(null,n)},r.renderFeed.render=function(){for(var e=this.thefeed,t="",n=$("<div class='feedbody'></div>"),r=0,i=e.length;i>r;r++){var s=e[r].title.$t,a=e[r].link[1].href,d=a.split("/"),c=d[d.length-2],o="https://img.youtube.com/vi/"+c+"/default.jpg";t+='<div class="video video'+r+'"><a href="#" title="'+s+'" name="video" targetVid="'+c+'"><img alt="'+s+'" src="'+o+'"/></a><h3><a href="#" title="'+s+'" name="video" targetVid="'+c+'">'+s+"</h3></a></div>",n.append(t),this.$feedwrap.append($feed)}this.containerElem.append(this.$feedwrap)};var i={getTumblrFeed:e.getTwitterFeed.createNewInstance(),renderFeed:e.renderFeed.createNewInstance()};i.getTumblrFeed.getFeed=function(e){var t=[];this._settings.user instanceof Array?t=this._settings.user:t.push(this._settings.user);for(var n=[],r=0,i=t.length;i>r;r++){var s="http://"+t[r]+".tumblr.com/api/read/json?&num="+Math.ceil(this._settings.feedCount/i)+"&callback=?",a=$.getJSON(s);n.push(a),$.when(a).then(function(t){for(var n=0,r=t.posts.length;r>n;n++)e.tweetCache.push(t.posts[n])})}return $.when.apply(null,n)},i.renderFeed.configure=function(e,t,n){this.thefeed=e,this.containerElem=n,this.$feedwrap=$("<div class='feedcontainer'></div>"),console.log("configuring tumblr feeds: "+e.length),$.extend(this._settings,t)},i.renderFeed.render=function(){for(var e=this.thefeed,t=0,n=e.length;n>t;t++){var r=e[t].type,i=$("<div class='feed'></div>"),s=$("<p class='feedbody'></p>"),a=e[t].text;if("regular"===r){var d=$("<div class='feedbody'></div>"),c=e[t].url,o=$("<h3 class='feedtitle'><a href='"+c+"' target='_blank'>"+e[t]["regular-title"]+"</a></h1>"),l=$(e[t]["regular-body"]),h=l.find("img");h.length&&d.append(h.eq(0)),""===o&&h.length<=0&&(a=l.text(),d.append(a.substr(0,50)+"...")),s.append(o),s.append(d)}else{if("photo"!==r)return;i.addClass("photo");var u=$("<img src='"+e[t]["photo-url-250"]+"'/>");i.append(u)}i.append(s),this.$feedwrap.append(i)}this.containerElem.append(this.$feedwrap),this._settings.renderCallback&&this._settings.renderCallback.call(this.containerElem)},$.fn.jqTweet=function(t){var n={getTwitterFeed:e.getTwitterFeed.createNewInstance(),renderFeed:e.renderFeed.createNewInstance()},r=this,i={tweetCount:10,getProfilePic:!0,linkLinks:!0,linkHashes:!0,linkMentions:!0,getDate:!0,emptyMsg:"Twitter feed is unavailable",debug:!0};return $.extend(i,t),n.getTwitterFeed.configure(i),n.getTwitterFeed.tweetPromise.then(function(){n.getTwitterFeed.sortFeeds(),n.getTwitterFeed.tweetCache.length>i.tweetCount&&(n.getTwitterFeed.tweetCache=n.getTwitterFeed.tweetCache.slice(0,i.tweetCount)),n.renderFeed.configure(n.getTwitterFeed.tweetCache,i,r),n.renderFeed.render()},function(){}),r},$.fn.jqTweetREST=function(e){var n={getTwitterFeed:t.getTwitterFeed.createNewInstance(),renderFeed:t.renderFeed.createNewInstance()},r=this,i={tweetCount:10,getProfilePic:!0,linkLinks:!0,linkHashes:!0,linkMentions:!0,getDate:!0,emptyMsg:"Twitter feed is unavailable",debug:!0};return $.extend(i,e),n.getTwitterFeed.configure(i),n.getTwitterFeed.tweetPromise.then(function(){n.getTwitterFeed.sortFeeds(),n.getTwitterFeed.tweetCache.length>i.tweetCount&&(n.getTwitterFeed.tweetCache=n.getTwitterFeed.tweetCache.slice(0,i.tweetCount)),n.renderFeed.configure(n.getTwitterFeed.tweetCache,i,r),n.renderFeed.render()},function(){}),r},$.fn.jqTumblr=function(e){var t={getTumblrFeed:i.getTumblrFeed.createNewInstance(),renderFeed:i.renderFeed.createNewInstance()},n=this,r={feedCount:5,getDate:!0};$.extend(r,e),t.getTumblrFeed.configure(r),t.getTumblrFeed.tweetPromise.then(function(){t.renderFeed.configure(t.getTumblrFeed.tweetCache,r,n),t.renderFeed.render()},function(){})},$.fn.jqTweetLIST=function(e){console.log("list go!");var t={getTwitterFeed:n.getTwitterFeed.createNewInstance(),renderFeed:n.renderFeed.createNewInstance()},r=this,i={feedCount:5,getDate:!0};$.extend(i,e),t.getTwitterFeed.configure(i),t.getTwitterFeed.tweetPromise.then(function(){t.renderFeed.configure(t.getTwitterFeed.tweetCache,i,r),t.renderFeed.render()},function(){})},$.fn.youtubeFeed=function(e){console.log("youtube go!");var t={getTwitterFeed:r.getTwitterFeed.createNewInstance(),renderFeed:r.renderFeed.createNewInstance()},n=this,i={feedCount:5,getDate:!0};$.extend(i,e),t.getTwitterFeed.configure(i),t.getTwitterFeed.tweetPromise.then(function(){t.renderFeed.configure(t.getTwitterFeed.tweetCache,i,n),t.renderFeed.render()},function(){})}}(jQuery);